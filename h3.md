# H3 Viikkotehtävät
Aloitusaika: 4.9.2025, 10:00.

Lopetusaika: 

Aloitin tehtävien tekemisen lukemalla H3-osion artikkelit, linkit lähteisiin löytyi Tero Karvisen nettisivuilta, Linux-palvelimet 2025 alkusyksy- kurssin tiedoista. (Karvinen 2025). Tässäkin raportissa pyrin kirjaamaan ylös sen hetkiset tuntemukset osaamisesta, kurssista ja tehtävästä. Itse tarvitsisin enemmän käytönnön selkeitä esimerkkejä. 500 kirjainlyhennettä yms. viikossa on mahdoton sisäistää ilman selkeitä oikean elämän esimerkkejä. 

## Artikkeli 1 - Name-based vs. IP-based Virtual Hosts
Artikkelin avatessani ja sitä hieman silmäiltyäni, aivoni sanoivat, että jaa. Eli aivan täyttä hepreaa enkä ymmärrä yhtikäs mitään. Jouduin googlettelemaan suomennoksia niinkin "perus" sanoista kuten IP, virtual host, http header etc. Edellä mainitutkin sanat olen kyllä kuullut, mutta lähtötasona minulla oli tässäkin tehtävässä, että ei mitään hajua ja ei juurikaan mistään. Mikä on DNS server? Mikä on hosting? Suurin osa tehtävän/artikkelin tekemisestä kului selvittäessäni ja edes jotenkin ymmärtääkseni mitä nämä edes tarkoittavat. Kokonaisuuden hahmottaminen ja ymmärtäminen tämän kurssin aikana vaikuttaa todella kaukaiselta. Olen kuitenkin tyytyväinen jos kurssin jälkeen osaan edes 5% käsitellyistä aiheista! 

Artikkeli lyhyesti:
- IP-pohjaisen ja Nimi-pohjaisen palvelimen ero on siinä, että IP- pohjainen käyttää IP-osoitetta määrittääkseen oikean virtuaalipalvelun. Nimi-pohjainen taas palvelin luottaa siihen, että asiakas raportoi/ kertoo palvelimen nimen osana HTTP Headeria.

(Vaikka HTTP headerin googlasin, niin en silti ymmärrä sitä, tulokset kun aukesivat näytölle niin sieltä selvisi vain lisää uusia tuntemattomia sanoja kuten esim. avain-arvo-pari, tämän kun googlaa niin taas tulee uusia tuntemattomia sanoja. Valitettavasti aikaa on rajoitetusti niin tämä asia jäi nyt selvittämättä, ehkä tämäkin selkenee kurssin edetessä tai muilla kursseilla (apache, n.d.)


## Artikkeli 2 - Name Based Virtual Hosts on Apache - Multiple Websites to Single IP Address

- Artikkelissa käydään läpi komentorivin komentoja nimipohjaiseen virtuaali-hostaamisessa. Esim. $ sudo apt-get -y install apache2.
- Artikkeli ohjeistaa suhteellisen helpoin ohjein (jos jotain komentorivistä ymmärtää) miten esim. luodaan uusi nimi pohjainen virtuaali host ja miten tehdään webbisivu normaalina käyttäjänä.
- Komentoja ja muutoksia voidaan testata suoraan komentorivillä (curl localhost) tai vaikka firefox-selaimessa kirjoittamalla localhost hakukenttään. (Karvinen, 2018)

(Tunnilla käytiin näitä läpi, mutta henk koht tämä on todella todella haastavaa. Ensimmäistä kertaa elämässäni avasin komnetorivin kun tämä kurssi alkoi, joten ei ihmekään, että logiikka on vielä hakusessa.) 

## Tehtävät
Aluksi täytyi testata, että webbipalvelin vastaa localhost osoitetta, en ymmärrä täysin mitä tämä tarkoittaa, mutta firefoxissa jos kirjotan localhost niin tulee tekstiä minkä tunnilla sinne määritin. 

 ![Add file: Upload](kuvat/nettisivu.png)


Seuraavaksi tuli etsiä lokista rivit ja analysoida niitä, laitoin komentoriviin koodin: sudo tail -f /var/log/apache2/access.log. Tiedä sitten onko tämä se oikea logisivu vai ei. 

 ![Add file: Upload](kuvat/lokit.png)

Monta riviä tulee tekstiä, huomaan, että alin näistä on juuri nyt tehty päivitys (ehkä). Ensimmäisenä tässäkin kohtaa on IP-osoite josta pyyntö tulee (localhost / oma tietokone), seuraavana näkyy päivämäärä, eli hetki jolloin pyynto on tehty. Seuraavana on kohta GET HTTP, jossa selain pyytää sivua HTTP protokollalla. Tämän jälkeen on koodi 304, joka tarkoittaa tässä tapauksessa Not modified eli ei muutoksia. Koodi kertoo HTTP-statuksen. Se voi olla myös esim. 200 (ok) tai 404 (ei löytynyt). Seuraava kohta on myös numero (248), joka kertoo vastauksen koon tavuina (ehkä :D?). Tässä kohtaa webbisivuille ei tehty muutoksia, niin koko on pienempi. 

Tässä kohtaa huomasin, että kaikki nämä "tiedot / komennot" on putkeen, eikä mitenkään käyttäjäystävällisesti eroteltu lohkoiksi vaikka pilkuin tai (). Toki kun nämä ymmärtää, niin ne sitten ymmärtää.

Seuraavaksi oli "-", tarkoittaa tyhjää, kosks kirjoitin firefoxissa suoraan localhost, jos olisin tullut toisen sivun kautta esim. googlesta tai linkin kautta niin tuossa "-" kohtaa olisi se viittaava sivu.

Seuraavaksi tuosa logissa on kohta joka alkaa Mozilla/5.0. Tämä pidempi teksti kertoo selaimen ja alustan millä pyyntö tehtiin. 

(Tunnelmia: tämän login ymmärtäminen tuntui helpolta, aluksi näytti siltä taas, että ei ymmärrä mitään, mutta tästä osiosta jäi jotain päähänkin!)


## Etusivu uusiksi

Aluksi taas epätoivoiset tunnelmat, koska ei ollut mitään hajua mistä edes lähtisi liikkeelle.

Aloitin uuden hattu.example.com sivuston tekemisen komentorivillä: mkdir -p /home/aatu1/public-sites/hattu.example.com
tämän jälkeen tein uuden tiedoston nano index.html ja lisäsin esimerkki sisällöksi tekstiä.

![Add file: Upload](kuvat/hattu_toimii_nettisivu.png)

Tämä vaihe onnistui hyvin. Tässä vaiheessa tein näitä tehtäviä VM:n puolella useamman tunnin ja en tehnyt muistiinpanoja, niin en tarkalleen enää muista mitä tein missäkin vaiheessa ja mitä ongelmia oli ja niitähän oli. Hyvä muistutus seuraaviin harjoituksiin, että tekee muistiinpanoja tai kirjoittaa tätä tekstiä samalla kun tekee tehväviä.


Pyysin Chatgpt:tä tekemään selkeän kaavion ongelmista, syistä ja ratkaisuista. (tässä osa ongelmista, kaikkia ongelmia en muistanut). (chatgpt. 2025)
![Add file: Upload](kuvat/ongelmat.png)

En saanut selaimessa toimimaan hattusivua, ongelma monessa eri kohdassa. Olin unohtanut lisätä .conf loppuun ainakin.

Lopulta sain kuitenkin hattu-sivun toimimaan localhostina ja selaimelta hattu.example.com kautta.
![Add file: Upload](kuvat/hattusivuvalmis.png)

## Validi sivu
Validiksi en sivua saanut, vaikka kaikki toimii muuten, mutta https://validator.w3.org mukaan ei ole validi. En keksinyt tähän ratkaisua, koska localhost toimii sekä toimii jos kirjoitan http://hattu.example.om (W3C. n.d.)

Aluksi oli hattu-sivulla vain tekstiä, lisäsin sinne ohjeiden mukaisti headarit ja h1 yms. mutta ei auttanut ongelmaan.
![Add file: Upload](kuvat/onkovalidi.png)

## Curl
Curl -l hattu.example.com komennolla aukesi tietoja sivustosta, siitä näkee esim mitä serveriä käytetään, mikä on sisällöön tyyppi (text/html) ja milloin on muokattu.
![Add file: Upload](kuvat/curl-lhatusta.png)


Curl komento hattu.example.com:ista näyttää sivuston sisällön. Curlilla näkee tietojeni mukaan siis ainakin webbisivun sisällön.
![Add file: Upload](kuvat/curlhatusta.png)



## Lähteet
Karvinen, T. 2025. Linux palvelimet. Luettavissa: https://terokarvinen.com/linux-palvelimet/ Luettu 4.9.2025

Apache. n.d. Name-based Virtual Host Support Luettavissa: https://httpd.apache.org/docs/2.4/vhosts/name-based.html Luettu 4.9.2025

Karvinen, T. 2028. Name Based Virtual Hosts on Apache – Multiple Websites to Single IP Address Luettavissa: https://terokarvinen.com/2018/04/10/name-based-virtual-hosts-on-apache-multiple-websites-to-single-ip-address/ Luettu 4.9.2025

W3C. n.d. MArkup Validation Service Luettavissa: https://validator.w3.org Luettu 4.9.2025

chatgpt

