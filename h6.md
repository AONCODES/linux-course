# h6 Salataampa

## Let's Encrypt 2025
- Let's Encrypt tunnistaa ACMA softan (esim. certbot) julkisen avaimen avulla.
- Asiakas (certbot) luo uuden avainparin, jotta voi todistaa hallitsevansa tiettyä domainia/domaineja.
- Certbot kysyy Let's Encryptiltä mitä sen tulee tehdä todistaakseen, että hallitsee esim. domainia aatuniemi.com
- Let's Encrpyt pyytää tekemään jonkinlaisia haasteita esim. DNS recordien parissa. Kun Certbot on tehnyt haasteet, Let's Encrypt CA vielä tarkistaa/varmentaa ne.
- Sertifikaatti myönnetään ja uusitaan samalla periaatteella -> asiakas lähettää pyynnön CA:lle, allekirjoitettuna valtuutetulla avaimella. (Let's Encrypt 2025).

## Apache SSL/TLS Strong encyprion: How-to
Artikkelissa näytetään konfiguraatio esimerkki mitä terminalissa tulee olla minimissään SSL/TLS salaukseen: 
<img width="625" height="159" alt="Näyttökuva 2025-09-25 kello 15 45 30" src="https://github.com/user-attachments/assets/95f600a3-142d-4a06-b6d9-f97ed739284f" /> (Apache. n.d.)


## TLS- sertifikaatti omalle pilvipalvelimelle
Tehtävänä oli hankkia TLS-sertifikaatti Let's Encryptilta ja osoittaa, että se toimii. Lähdin liikkelle vinkkien mukaisesti. Ensin SSH yhteys pilvikoneeseen ja sitten käynnistin apachen uudelleen (sudo systemctl restart apache2), jonka jälkeen varmistin toimiiko oma domain seaimessa sekä kokeilin myös puhelimella ja hyvin näytti toimivan. Tämän jälkeen tein tulimuuriin reiän HTTPS liikenteelle porttiin 443. Muistin myös tässä välissä tehdä sudo apt-get update.

<img width="543" height="275" alt="Näyttökuva 2025-09-25 kello 16 18 04" src="https://github.com/user-attachments/assets/ef3f7608-5685-48bc-8ece-ec27d6104dab" />

Seuraava vaihe oli komentorivillä (sudo apt-get install certbot python3-certbot-apache), eli certbotin lataaminen. Kun certbotti oli ladattu niin hain certifikaattia (sudo certbot --apache --domains aatuniemi.com,www.aatuniemi.com) kahdelle domainille aatuniemi.com sekä www.aatuniemi.com, huom nämä tulee erotella pilkulla ilman väliä. Jätin alidomainit tästä ulos, koska luultavasti poistan ne kunhan vain kerkeän.

<img width="1024" height="553" alt="Näyttökuva 2025-09-25 kello 16 28 25" src="https://github.com/user-attachments/assets/d586ceb1-f2ea-4c1f-8b75-f9320810a7b4" />

Kuvastakin näkyy, että sertifikaatti on saapunutt sekä myös uusi private key on tallennettu automaattisesti.

Tarkistin vielä aatuniemi.com ja aluksi näkyi vielä ei suojattu yhteys, mutta kun sivun päivitti niin lukon kuva tuli näkyviin.

<img width="536" height="37" alt="Näyttökuva 2025-09-25 kello 16 31 39" src="https://github.com/user-attachments/assets/75fdca0a-3373-4be1-b732-9eeea0140dfc" />
<img width="524" height="33" alt="Näyttökuva 2025-09-25 kello 16 31 52" src="https://github.com/user-attachments/assets/4e816e2b-7cfd-4a67-9ab0-0f5683423379" />




## Lähteet
Karvinen, T. 2025. Linux Palvelimet 2025 alkusyksy. Luettavissa: https://terokarvinen.com/linux-palvelimet/ Luettu 25.9.2025.

Let's Encrypt. 2025. How It Works. Luettavissa: https://letsencrypt.org/how-it-works/ Luettu: 25.9.2025.

Apache. n.d. SSL/TLS Strong Encyprion: How-to. Luettavissa: https://httpd.apache.org/docs/2.4/ssl/ssl_howto.html#page-header Luettu 25.9.2025.
