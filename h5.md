## Viikko 5 tehtävät

## Käsitteitä

Alidomain
- kuvat.aatuniemi.com, kuvat sana on tässä tapauksessa alidomain. Alidomain mahdollistaa webbisivujen jakamisen toisiin alueisiin. Tässä tapahauksessa kuvat alidomainilla voitaisiin luoda erillinen sivu joka sisältäisi kuvia. Alidomainit ovat erityisen hyödyllisiä suurille yrityksille joilla monta toimipistettä. Voitaisiin tehdä siis esim. helsinki.yritys.fi ja madrid.yritys.fi, eli toimipaikkakohtaisesti. Lisäksi kieliversiot voidaan erotella alidoimainilla en.aatuniemi.com ja fi.aatuniemi.com. Alidomainilla on näiden lisäksi muitakin hyödyllisiä käyttötarkoituksia! (IONOS 2022)

A-tietue
- A-tietueessa kirjain "A" viittaa sanaan "address", tietueita käyteään DNS-asetuksissa yhdistämään domain IPv4-osoitteeseen. Esim aatuniemi.com a-tietueena on pilvikoneen IP-osoite. Tämä on helpompaa käyttäjille, kuin se, että aatuniemi.com sivustoa etsiessä tulisi käyttäjän tietää IP-osoite, nyt siis riittää selaimeen aatuniemi.com. (Cloudflare n.d.)

CNAME-tietue
- Ohjaa aliaksen varsinaiseen domainiin, alias voi olla esim alidomain kuvat.aatuniemi.com ja CNAME-tietue ohjaa sen varsinaiseen domainiin aatuniemi.com. CNAME ei osoita IP-osoitteeseen vaan aina toiseen domainiin. (Cloudflare. n.d.)

DNS
- Domain Name System (DNS) on tavallaan internetin puhelinluettelo. Käyttäjät kirjoittavat verkkotunnuksia (domain) selaimeen, esim. aatuniemi.com. Tietokoneet taritsevat IP-osoitteita ja DNS muuntaa domainit IP-osoitteiksi, jolloin selain löytää oikeat palvelimet. (CLoudflare. n.d.)

## Nimi

Tehtävänä oli osoittaa julkinen nimi omaan koneeseen, ostin domainin namecheapilta, koska tätä suositeltiin ja hinta oli maltillinen vuositasolla. Namecheap on todella  yksinkertainen palvelu, hakukenttään laitat haluamasi domainin ja hakutulokset kertovat mitä vaihtoehtoja on vapaana.
Kun sain ostettua oman domainin, kirjauduin namecheapin omille sivuille.
 - Dashboard -> omadomain -> manage -> Advanced DNS.
Tuolla polulla pääsin muokkaamaan DNS-asetuksia

<img width="924" height="578" alt="Näyttökuva 2025-09-23 kello 11 41 03" src="https://github.com/user-attachments/assets/6df2bbcd-c600-4138-a80c-ecd371317ec2" />

Lisäsin Type Host Value TTL kohtaan kaksi uutta A-tietuetta (A-record), Hostiksi tuli toiseen @ ja toiseen www. Value sai arvoksi pilvikoneen julkisen IP-osoitteen sekä TTL suositeltiin laittamaan mahdolisimman lyhyeksi ainakin aluksi. Kun nämä asetuksit oli muokattu niin liikenteen pitäisi ohjautua oikealle palvelimelle.

Seuraavaksi avasin virtuaalilinuxin ja otin SSH- yhteyden pilvikoneeseen 

<img width="840" height="208" alt="Näyttökuva 2025-09-23 kello 11 46 59" src="https://github.com/user-attachments/assets/76d6a2b9-fa44-4c86-9fe9-f3720c1b61a6" />

cd /etc/apache2/sites-available ja sitten ls komennoilla näen mitä sivustoja minulla on. Tämän jälkeen sudo nano aatuniemi.com.conf komennolla pääsin konfiguroimaan apachen jotta palvelin tunnistaa domainin.

<img width="602" height="297" alt="Näyttökuva 2025-09-23 kello 11 51 10" src="https://github.com/user-attachments/assets/0be94bfa-35bc-4b64-b7ba-569dc9bc101c" />

ServerName ja ServerAlias kohtiin tulee domainin nimi, sekä DocumentRoot tulisi olla se polku, missä sivut ovat.

Tämän jälkeenotin sivuston käyttöön komennoilla:

sudo a2ensite aatuniemi.com.conf
sudo systemctl reload apache2

<img width="1135" height="183" alt="Näyttökuva 2025-09-23 kello 11 54 25" src="https://github.com/user-attachments/assets/f1510fa2-03d1-4888-bb1c-372f21db634d" />

Kuvassa näkyy sivuston yläosa, eli kaikki näyttäisi toimivan oikein!

## Alidomain

Tässä tehtävässä oli tarkoituksena tehdä kaksi uutta alidomainia jotka osoittavat omaan koneeseeni. Ensiksi menin namecheapin sivuille ja sieltä taas etsin Advanced DNS-asetukset. Tein kaksi uutta tietuetta. A-tietue jonka Hostiksi laitoin linuxkurssi, value on sama IP-osoite kuin pilvipalvelimessa sekä laitoin TTL nyt automaattiseksi kun se tuli siihen valmiiksi. Tämän jälkeen tein CNAME-tietueen jonka Host nimeksi tuli niinkin tylsä kuin "testi". Value vaihtui tässä hieman, eli CNAME tietue ei osoita IP-osoitteeseen vaan domainiin, joten laitoin tähän Valuen arvoksi aatuniemi.com ja TTL myös automaattiseksi.

<img width="1121" height="123" alt="Näyttökuva 2025-09-23 kello 13 22 04" src="https://github.com/user-attachments/assets/731509e7-3058-4e18-97bb-8b4c1058643f" />

Tehtävässä riittää, että alidomainit avaavat saman sivun kuin päädomain (aatuniemi.com). Tämä helpottaa virtuaalilinuxissa tehtäviä hommia. Seuraava vaihe oli siis mennä virtuaalilinuxin komentoriville, ottaa SSH-yhteys pilvikoneeseen ja komennolla cd /etc/apache2/sites-available/ ja ls näen mitä sivustoja löytyy.

<img width="497" height="55" alt="Näyttökuva 2025-09-23 kello 13 30 46" src="https://github.com/user-attachments/assets/54b75487-9af7-48bc-8f03-7d3ae8e0df0b" />

komennolla sudo nano aatuniemi.fi.conf pääseen taas muokkaamaan tietoja.

<img width="763" height="105" alt="Näyttökuva 2025-09-23 kello 13 33 48" src="https://github.com/user-attachments/assets/274f3ab4-5ed6-4ff5-91ca-21e7dd731476" />

Lisäsin ServerAlias kohtaan uudet alidomainit ja lopuksi taas aktivoin ja latasin uudelleen komennolla sudo systemctl reload apache2.

Kokeilin molempia alidomaineja ja molemmat toimivat, eli aatuniemi.com pääsivu tulee näkyviin kun kirjoitan selaimeen joko linuxkurssi.aatuniemi.com tai testi.aatuniemi.com.


## Host & Dig
Yritin tutkia aatuniemi.com tietoja ja selvisi, että minun täytyy ladata jokin ohjelma ja pienellä googlailulla löytyi dnsutils, latasin sen.

<img width="588" height="201" alt="Näyttökuva 2025-09-23 kello 14 02 31" src="https://github.com/user-attachments/assets/6949ebd1-2c5b-4c48-9f9f-6e106e56121a" />

Komennolla host aatuniemi.com selviää ainakin pilvikoneen IP-osoite. dig komennolla löytyy  myös ainakin A tietueena tuo IP-osoite.
<img width="636" height="527" alt="Näyttökuva 2025-09-23 kello 14 07 37" src="https://github.com/user-attachments/assets/98dfc44d-fa76-4b1b-b9dc-ec25031b879b" />

Seuraavaksi tutkin mitä tuo man tarkoittaa ja selviää, että sekin on erillinen ohjelma koska komennolla man dig tulee vain command not found. Latasin siis myös man ohjelman -> sudo apt-get update ja sudo apt-get install man-db (Stackoverflow 2018). Nyt komennolla man dig löytyy todella paljon tietoa mitä komennolla dig voidaan tehdä, kuten myös komennolla man host löytyy hostille paljon tietoa.

<img width="991" height="577" alt="Näyttökuva 2025-09-23 kello 14 18 28" src="https://github.com/user-attachments/assets/c13c829b-cc08-4177-8a61-6a93b5cd7a21" />






## Lähteet
NameCheap. n.d. Luettavissa: https://www.namecheap.com. Luettu 23.9.2025.

Karvinen T, 2025. Linux Palvelimet 3035 alkusyksy. Luettavissa: https://terokarvinen.com/linux-palvelimet/. Luettu 23.9.2025.

IONOS. 10.12.2022. What is a subdomain? Luettavissa: https://www.ionos.com/digitalguide/domains/domain-administration/what-is-a-subdomain/. Luettu 23.9.2025. 

CloudFlare. n.d. What is a DNS A record? Luettavissa: https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/. Luettu: 23.9.2025

CloudFlare. n.d. What is a DNS CNAME record? Luettavissa: https://www.cloudflare.com/learning/dns/dns-records/dns-cname-record/. Luettu 23.9.2025

CloudFlare. n.d. What is a DNS? Luettavissa: https://www.cloudflare.com/learning/dns/what-is-dns/. Luettu 23.9.2025

https://stackoverflow.com/questions/53343801/how-do-i-get-the-man-command

